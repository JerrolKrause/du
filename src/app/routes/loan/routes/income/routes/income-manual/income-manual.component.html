<app-masterpage>
  <section class="forground">
    <nav><a routerLink="../">â€¹ Go Back</a></nav>
    <h1>Verify Income</h1>
    <p>Please select the document you want to provide to verify your income.</p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <p-dropdown formControlName="dropdown" [options]="options"></p-dropdown>
      <p-button type="submit" [rounded]="true" label="Continue"></p-button>
    </form>

    <p class="secure">We use 256-Bit SSL encryption for transmission of your information.</p>
    <p class="privacy">Your privacy is important to us. See our <a href="#">privacy policy</a>.</p>
  </section>
  <section>
    @switch (routeApi.incomeVerificationMethodsLoadingState$ | async) {
      @case (LoadingState.Loading) {
        <p-card>
          <p-progressSpinner></p-progressSpinner>
          <p>Loading</p>
        </p-card>
      }
      @case (LoadingState.Success) {
        @for (method of routeApi.incomeVerificationMethods$ | async; track method) {
          <p-card class="verification-method">
            @switch (method) {
              @case (IncomeVerificationMethod.Plaid) {
                <app-plaid-verify-action [upsell]="true" />
              }
              @case (IncomeVerificationMethod.IRS) {
                <app-irs-verify-action [upsell]="true" />
              }
            }
          </p-card>
        }
      }
      @case (LoadingState.Error) {
        <p-card>
          <h2>There was an error loading your income verification options.</h2>
          <p>Details: {{ routeApi.incomeVerificationMethodsErrorMessage$ | async }}</p>
        </p-card>
      }
    }

    <app-help-panel></app-help-panel>
  </section>
</app-masterpage>
