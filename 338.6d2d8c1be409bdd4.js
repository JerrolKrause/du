"use strict";(self.webpackChunkangular_starter=self.webpackChunkangular_starter||[]).push([[338],{2338:(z,f,i)=>{i.r(f),i.d(f,{LoginModule:()=>B});var d=i(1449),c=i(6609),l=i(177),o=i(4341),h=i(491),e=i(4438),v=i(3306),y=i(9329),C=i(1962),I=i(2816);function T(t,r){1&t&&e.nrm(0,"CheckIcon",4),2&t&&e.Y8G("styleClass","p-inline-message-icon")}function G(t,r){1&t&&e.nrm(0,"InfoCircleIcon",4),2&t&&e.Y8G("styleClass","p-inline-message-icon")}function N(t,r){1&t&&e.nrm(0,"TimesCircleIcon",4),2&t&&e.Y8G("styleClass","p-inline-message-icon")}function w(t,r){1&t&&e.nrm(0,"ExclamationTriangleIcon",4),2&t&&e.Y8G("styleClass","p-inline-message-icon")}function b(t,r){if(1&t&&e.nrm(0,"span",6),2&t){const n=e.XpG(2);e.Y8G("innerHTML",n.text,e.npT)}}function F(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,b,1,1,"span",5),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.escape)}}function S(t,r){if(1&t&&(e.j41(0,"span",8),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.JRh(n.text)}}function U(t,r){if(1&t&&e.DNE(0,S,2,1,"span",7),2&t){const n=e.XpG();e.Y8G("ngIf",n.escape)}}let E=(()=>{class t{severity;text;escape=!0;style;styleClass;get icon(){return this.severity?"success"===this.severity?"success":"info"===this.severity?"info":"warning"===this.severity?"warn":"danger"===this.severity?"error":"info":"info"}get containerClass(){return{[`p-inline-message-${this.severity}`]:this.severity,"p-inline-message-icon-only":null==this.text}}static \u0275fac=function(s){return new(s||t)};static \u0275cmp=e.VBU({type:t,selectors:[["p-message"]],hostAttrs:[1,"p-element"],inputs:{severity:"severity",text:"text",escape:[e.Mj6.HasDecoratorInputTransform,"escape","escape",e.L39],style:"style",styleClass:"styleClass"},features:[e.GFd],decls:8,vars:10,consts:[["escapeOut",""],["aria-live","polite",1,"p-inline-message","p-component","p-inline-message",3,"ngStyle","ngClass"],[3,"styleClass",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"styleClass"],["class","p-inline-message-text",3,"innerHTML",4,"ngIf"],[1,"p-inline-message-text",3,"innerHTML"],["class","p-inline-message-text",4,"ngIf"],[1,"p-inline-message-text"]],template:function(s,a){if(1&s&&(e.j41(0,"div",1),e.DNE(1,T,1,1,"CheckIcon",2)(2,G,1,1,"InfoCircleIcon",2)(3,N,1,1,"TimesCircleIcon",2)(4,w,1,1,"ExclamationTriangleIcon",2)(5,F,2,1,"div",3)(6,U,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&s){const m=e.sdS(7);e.HbH(a.styleClass),e.Y8G("ngStyle",a.style)("ngClass",a.containerClass),e.R7$(),e.Y8G("ngIf","success"===a.icon),e.R7$(),e.Y8G("ngIf","info"===a.icon),e.R7$(),e.Y8G("ngIf","error"===a.icon),e.R7$(),e.Y8G("ngIf","warn"===a.icon),e.R7$(),e.Y8G("ngIf",!a.escape)("ngIfElse",m)}},dependencies:()=>[l.YU,l.bT,l.B3,v.S,C.e,I.I,y.P],styles:["@layer primeng{.p-inline-message{display:inline-flex;align-items:center;justify-content:center;vertical-align:top}.p-inline-message-icon-only .p-inline-message-text{visibility:hidden;width:0}.p-fluid .p-inline-message{display:flex}}\n"],encapsulation:2,changeDetection:0})}return t})(),D=(()=>{class t{static \u0275fac=function(s){return new(s||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[l.MD,v.S,C.e,I.I,y.P]})}return t})();var u=i(1935),Y=i(876),j=i(5779),$=i(8403),R=i(7203),L=i(2214);const M=t=>({"p-focus":t}),X=t=>({"btn-waiting":t});function P(t,r){1&t&&e.nrm(0,"p-message",16)}function V(t,r){1&t&&e.nrm(0,"p-message",17)}function k(t,r){if(1&t&&e.DNE(0,P,1,0,"p-message",16)(1,V,1,0,"p-message",17),2&t){const n=r,s=e.XpG();e.vxM(0,n===s.authStateType.sessionExpired?0:-1),e.R7$(),e.vxM(1,n===s.authStateType.loggedOut?1:-1)}}function H(t,r){1&t&&e.nrm(0,"p-message",4)}const g="savedUserName",O=[{path:"",component:(()=>{class t{constructor(n,s,a,m,p){this.authService=n,this.route=s,this.router=a,this.fb=m,this.dom=p,this.formMain=this.fb.group({userName:new o.FormControl("juser",{validators:o.Validators.required,nonNullable:!0}),password:new o.FormControl("password",{validators:o.Validators.required,nonNullable:!0}),remember:new o.FormControl(!1,{nonNullable:!0})}),this.state=(0,e.vPA)({waiting:!1,error:null,showErrorDetails:!1,loggedout:!1,showPassword:!0}),this.authState$=this.authService.authState$,this.authStateType=c.kj}ngOnInit(){const n=this.dom.localStorage?.getItem(g);n&&this.formMain.patchValue({userName:n,remember:!0}),this.authService.logOutModal=null}onLogin(){this.state.update(n=>({...n,waiting:!0,error:null,showErrorDetails:!1})),this.formMain&&this.formMain.value.remember?this.dom.localStorage?.setItem(g,this.formMain.value.userName||""):this.dom.localStorage?.removeItem(g),this.authService.logIn(this.formMain.value).subscribe(()=>{this.router.navigate([this.route.snapshot.queryParams.returnUrl||"/"]),this.state.update(s=>({...s,waiting:!1}))},n=>{n.errorMsg="Error logging in.",(n.statusText="Unauthorized")&&(n.errorMsg="Invalid username or password, please try again.",this.state.update(s=>({...s,showErrorDetails:!1}))),this.state.update(s=>({...s,error:n,waiting:!1}))})}ngOnDestroy(){}static#e=this.\u0275fac=function(s){return new(s||t)(e.rXU(c.uR),e.rXU(u.nX),e.rXU(u.Ix),e.rXU(o.NonNullableFormBuilder),e.rXU(Y.K5))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:30,vars:15,consts:[[1,"container","mt-5"],[1,"m-auto",2,"max-width","480px"],["novalidate","",3,"ngSubmit","formGroup"],["icon","user"],["severity","danger","text","Unable to log in, please check your username and password"],[1,"mb-4"],[1,"p-float-label","mb-4",3,"ngClass"],["id","userName","type","text","size","30","pInputText","","formControlName","userName",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","userName"],["id","password","type","password","size","30","pInputText","","formControlName","password",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","password"],[1,"form-check-label"],["type","checkbox","formControlName","remember",1,"form-check-input","remember"],[1,"text-end"],["type","submit",1,"btn","btn-primary",3,"disabled","ngClass"],["icon","power-off",1,"me-2"],["severity","warning","styleClass","w-100 mb-3","text","Session expired, please log in again"],["severity","success","styleClass","w-100 mb-3","text","You have successfully logged out"]],template:function(s,a){if(1&s&&(e.nrm(0,"app-header"),e.j41(1,"div",0)(2,"div",1)(3,"form",2),e.bIt("ngSubmit",function(){return a.onLogin()}),e.j41(4,"h1"),e.nrm(5,"app-icons",3),e.EFF(6," Please sign in"),e.k0s(),e.j41(7,"p-card"),e.DNE(8,k,2,2),e.nI1(9,"async"),e.DNE(10,H,1,0,"p-message",4),e.j41(11,"p",5),e.EFF(12,"Please enter your username and password."),e.k0s(),e.j41(13,"p",6),e.nrm(14,"input",7),e.j41(15,"label",8),e.EFF(16,"Username"),e.k0s()(),e.j41(17,"p",6),e.nrm(18,"input",9),e.j41(19,"label",10),e.EFF(20,"Password"),e.k0s()(),e.j41(21,"label",11),e.nrm(22,"input",12),e.EFF(23," Remember my username "),e.k0s(),e.j41(24,"p-footer")(25,"div",13)(26,"button",14),e.nrm(27,"app-icons",15),e.EFF(28," Sign In "),e.k0s()()()()()()(),e.nrm(29,"app-footer")),2&s){let m,p,x;e.R7$(3),e.Y8G("formGroup",a.formMain),e.R7$(5),e.vxM(8,(m=e.bMT(9,7,a.authState$))?8:-1,m),e.R7$(2),e.vxM(10,a.state().error?10:-1),e.R7$(3),e.Y8G("ngClass",e.eq3(9,M,!(null==(p=a.formMain.get("userName"))||!p.value))),e.R7$(4),e.Y8G("ngClass",e.eq3(11,M,!(null==(x=a.formMain.get("userName"))||!x.value))),e.R7$(9),e.Y8G("disabled",a.formMain.invalid||a.state().waiting)("ngClass",e.eq3(13,X,a.state().waiting))}},dependencies:[l.YU,j.wi,o.\u0275NgNoValidate,o.DefaultValueAccessor,o.CheckboxControlValueAccessor,o.NgControlStatus,o.NgControlStatusGroup,o.FormGroupDirective,o.FormControlName,h.Card,E,$.n,R.l,L.IconsComponent,l.Jj],encapsulation:2})}return t})(),title:(0,c.Qe)("Login")}],A=u.iI.forChild(O);let B=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.$C({type:t});static#n=this.\u0275inj=e.G2t({imports:[l.MD,c.Gg,o.FormsModule,o.ReactiveFormsModule,h.CardModule,D,A,d.YD,d.Gs]})}return t})()}}]);