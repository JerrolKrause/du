"use strict";(self.webpackChunkangular_starter=self.webpackChunkangular_starter||[]).push([[792],{686:(O,m,e)=>{e.d(m,{r:()=>v});var c=e(9079),o=e(1584),p=e(6354),u=e(4438),f=e(9781),y=e(1141),E=e(177);let v=(()=>{class g{constructor(I,T){this.ref=I,this.config=T,this.logoutTimer$=(0,o.O)(0,1e3).pipe((0,p.T)(M=>(this.config.data||60)-M)),this.logoutTimer$.pipe((0,c.pQ)()).subscribe(M=>{M<=0&&this.logout()})}ngOnInit(){}logout(){this.ref.close(!0)}ngOnDestroy(){}static#t=this.\u0275fac=function(T){return new(T||g)(u.rXU(f.Pw),u.rXU(f.sb))};static#e=this.\u0275cmp=u.VBU({type:g,selectors:[["app-logout-modal"]],decls:9,vars:3,consts:[["id","the_time"],[1,"p-dialog-footer","p-widget-content","ng-tns-c7-3","ng-star-inserted"],["type","button","pButton","","aria-label","Close","icon","fas fa-power-off","label","Log Out",1,"float-start","pull-left",3,"click"],["type","button","pButton","","icon","fas fa-angle-double-right","iconPos","right","label","Continue Working",3,"click"]],template:function(T,M){1&T&&(u.j41(0,"p"),u.EFF(1," Your session is about to expire in "),u.j41(2,"span",0),u.EFF(3),u.nI1(4,"async"),u.k0s(),u.EFF(5," seconds, do you want to continue working?\n"),u.k0s(),u.j41(6,"div",1)(7,"button",2),u.bIt("click",function(){return M.logout()}),u.k0s(),u.j41(8,"button",3),u.bIt("click",function(){return M.ref.close()}),u.k0s()()),2&T&&(u.R7$(3),u.JRh(u.bMT(4,1,M.logoutTimer$)))},dependencies:[y._f,E.Jj],encapsulation:2})}return g})()},6609:(O,m,e)=>{e.d(m,{Gf:()=>it,w5:()=>X,uR:()=>q,kj:()=>R,qk:()=>dt,zQ:()=>mt,Bj:()=>yt.B,Gg:()=>tt,Bh:()=>st,Bd:()=>D,Ll:()=>j,Qe:()=>et});var c=e(177),o=e(4438);e(3192),e(345);var F=e(1935),H=e(4799),x=e(9781);e(5409),e(2646);const Q=[F.iI,H.F,x.k_];let tt=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=o.$C({type:s});static#s=this.\u0275inj=o.G2t({providers:[c.vh,c.oe],imports:[c.MD,Q,F.iI,H.F,x.k_]})}return s})();const j=typeof process<"u"&&null!=process.versions&&null!=process.versions.node,D=!j;var C=e(950);const et=s=>s+` | ${C.c.properties.appName}`;class st extends F.nU{serialize(l){return this._withTrailingSlash(super.serialize(l))}_withTrailingSlash(l){const t=l.indexOf("?")>-1?"?":"#",n=l.split(t);return n[0].endsWith("/")||-1===l.substring(l.lastIndexOf("/")+1).indexOf(".")&&(n[0]+="/"),n.join(t)}}var nt=e(5822),W=e(4412),ot=e(3543);const rt={name:"Rachel"};var K=e(1626);let it=(()=>{class s{constructor(t){this.http=t,this.store=(0,nt.$C)(this.http),this.users=this.store({uniqueId:"id",apiUrl:"https://jsonplaceholder.typicode.com/users"}),this.loggedInUser$=new W.t(rt).asObservable(),this.loans$=new W.t(ot.A).asObservable()}static#t=this.\u0275fac=function(n){return new(n||s)(o.KVO(K.Qq))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Y=e(7786),$=e(3726),at=e(605),Z=e(9172),w=e(3386),lt=e(5558),b=e(6354),ct=e(3294),k=e(5964),N=e(8141),ht=e(6697),ut=e(686),G=e(876);let X=(()=>{class s extends G.n${set token(t){this.localStorage.setItem("token",t)}get token(){return this.localStorage.getItem("token")}get user(){return this.localStorage.getItem("user",{isJson:!0})}set user(t){this.localStorage.setItem("user",t)}constructor(){super(),this.token$=this.localStorage.getItem$("token"),this.user$=this.localStorage.getItem$("user",{isJson:!0})}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var R=function(s){return s[s.initial=0]="initial",s[s.loggedIn=1]="loggedIn",s[s.loggedOut=2]="loggedOut",s[s.sessionExpired=3]="sessionExpired",s}(R||{});let q=(()=>{class s{constructor(t,n,i,d,P,h){this.http=t,this.router=n,this.route=i,this.appStorage=d,this.dialogService=P,this.dom=h,this.authState$=new W.t(R.initial),this.tokenRefreshInterval=60,this.idleDuration=300,this.logoutModalDuration=60,this.logoutModalVisible=!1,this.userActions$=this.dom.isBrowser&&this.dom.document?(0,Y.h)((0,$.R)(document,"keypress"),(0,$.R)(document,"mousemove"),(0,$.R)(document,"click"),(0,$.R)(this.dom.document,"scroll")):(0,Y.h)(),this.refreshEvent$=this.userActions$.pipe((0,Z.Z)(0),(0,w.c)(1e3,void 0,{leading:!1,trailing:!0})),this.logoutTimerExpired$=this.refreshEvent$.pipe((0,lt.n)(()=>(0,at.Y)(1e3)),(0,b.T)(S=>S>this.idleDuration),(0,Z.Z)(!1),(0,ct.F)(),(0,k.p)(S=>!!this.appStorage.token&&S&&!this.logoutModalVisible),(0,N.M)(()=>this.launchLogoutModal())),this.refreshToken$=this.refreshEvent$.pipe((0,w.c)(1e3*this.tokenRefreshInterval,void 0,{leading:!1,trailing:!0}),(0,k.p)(S=>!!S&&!!this.appStorage.token&&!this.logoutModalVisible),(0,N.M)(()=>this.refreshToken())),this.route.queryParams.pipe((0,ht.s)(1)).subscribe(S=>{S.token&&(this.appStorage.token=S.token)})}logIn(t){return(C.c.endpoints.apiUrl&&C.c.endpoints.authLogin?this.http.post(C.c.endpoints.apiUrl+C.c.endpoints.authLogin,t):this.http.get("assets/mock-data/login.json")).pipe((0,N.M)(i=>{this.appStorage.token=i.data.token,this.authState$.next(R.loggedIn),i.data.expirationSeconds&&(this.idleDuration=i.data.expirationSeconds)}))}refreshToken(){const t=C.c.endpoints.apiUrl&&C.c.endpoints.authTokenRefresh?this.http.post(C.c.endpoints.apiUrl+C.c.endpoints.authTokenRefresh,{}):this.http.post("https://jsonplaceholder.typicode.com/posts/",{}).pipe((0,b.T)(()=>({data:{token:"12345",userGuid:"12345"},success:!0,meta:{}})));return t.subscribe(n=>{this.appStorage.token&&(this.authState$.next(R.loggedIn),this.appStorage.token=n.data.token)},()=>this.logOut(R.sessionExpired)),t}launchLogoutModal(){this.logoutModalVisible=!0,this.dialogService.open(ut.r,{data:this.logoutModalDuration,header:"Warning",width:"70%",dismissableMask:!0}).onClose.subscribe(n=>{n?this.logOut(R.loggedOut):this.refreshToken(),this.logoutModalVisible=!1})}logOut(t){this.appStorage.token=null,this.logoutModalVisible=!1,this.authState$.next(t);const n="/"!==this.router.url&&"/login"!==this.router.url?this.router.url.split("?")[0]:null;this.router.navigate(["/login"],{queryParams:{returnUrl:n}})}static#t=this.\u0275fac=function(n){return new(n||s)(o.KVO(K.Qq),o.KVO(F.Ix),o.KVO(F.nX),o.KVO(X),o.KVO(x.o3),o.KVO(G.K5))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),dt=(()=>{class s{constructor(t){this.dom=t}handleError(t){throw D&&!t.errorMsg&&!t.hasOwnProperty("status")&&C.c.production&&(C.c.endpoints.errorPath&&this.logError(t),this.resetState(t)),D||console.error(t),t}resetState(t){D&&(console.error({error:t}),this.dom?.localStorage?.clear(),this.dom?.sessionStorage?.clear())}logError(t){if(!C.c.endpoints.apiUrl||!C.c.endpoints.errorPath)return;const n=new XMLHttpRequest,d={level:"Error",class:"",message:t.message,exception:t.stack};n.open("POST",C.c.endpoints.apiUrl+C.c.endpoints.errorPath,!0),n.setRequestHeader("Content-type","application/json;charset=UTF-8"),n.send(JSON.stringify(d))}static#t=this.\u0275fac=function(n){return new(n||s)(o.KVO(G.K5))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac})}return s})();var ft=e(7673),pt=e(8810),gt=e(9437);let mt=(()=>{class s{constructor(t,n,i){this.appStorage=t,this.auth=n,this.transferState=i}intercept(t,n){if(!j&&"GET"===t.method){const h=(0,o.zw6)(t.url),S=this.transferState.get(h,null);if(S)return(0,ft.of)(new K.cS({body:S,status:200}))}const i={};this.appStorage.token&&(i.Authorization="Bearer "+this.appStorage.token);const d=new K.Lr(i);return n.handle(t.clone({headers:d})).pipe((0,N.M)(h=>{j&&h instanceof K.cS&&(200===h.status||202===h.status)&&this.transferState.set((0,o.zw6)(t.url),h.body)}),(0,gt.W)(h=>((401===h.status||403===h.status)&&this.sessionEnd(),(0,pt.$)(h))))}sessionEnd(){this.auth.logOut(R.sessionExpired)}static#t=this.\u0275fac=function(n){return new(n||s)(o.KVO(X),o.KVO(q),o.KVO(o.pJN))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac})}return s})();var yt=e(9357)},2040:(O,m,e)=>{var c;e.d(m,{B:()=>c}),function(o){let p;var r;let u,f,y,E,v,g;(r=p=o.Color||(o.Color={}))[r.red=0]="red",r[r.blue=1]="blue",r[r.orange=2]="orange",function(r){r[r.Unloaded=0]="Unloaded",r[r.Loading=1]="Loading",r[r.Success=2]="Success",r[r.Error=3]="Error"}(u=o.LoadingState||(o.LoadingState={})),function(r){r.Pending="PENDING",r.Active="ACTIVE",r.PaidOff="PAID_OFF",r.Denied="DENIED"}(f=o.LoanStatus||(o.LoanStatus={})),function(r){r.Secured="SECURED",r.Unsecured="UNSECURED"}(y=o.LoanType||(o.LoanType={})),function(r){r[r.Identity=0]="Identity",r[r.Income=1]="Income",r[r.Vehicle=2]="Vehicle"}(E=o.VerificationTypes||(o.VerificationTypes={})),function(r){r[r.New=0]="New",r[r.Pending=1]="Pending",r[r.ActionRequired=2]="ActionRequired",r[r.Verified=3]="Verified"}(v=o.VerificationStatus||(o.VerificationStatus={})),o.ACTIONABLE_VERIFICATIONS=[v.New,v.ActionRequired],function(r){r[r.Plaid=0]="Plaid",r[r.IRS=1]="IRS"}(g=o.IncomeVerificationMethod||(o.IncomeVerificationMethod={}))}(c||(c={}))},9357:(O,m,e)=>{e.d(m,{B:()=>c.B});var c=e(2040)},5409:(O,m,e)=>{e.d(m,{d:()=>p});var c=e(2040),o=e(4438);let p=(()=>{class u{transform(y){switch(y){case c.B.LoanStatus.Pending:return"Pending";case c.B.LoanStatus.Active:return"Active";case c.B.LoanStatus.PaidOff:return"Paid Off";case c.B.LoanStatus.Denied:return"Denied";default:return"Unknown"}}static#t=this.\u0275fac=function(E){return new(E||u)};static#e=this.\u0275pipe=o.EJ8({name:"loanStatus",type:u,pure:!0})}return u})()},3192:(O,m,e)=>{e.d(m,{_:()=>o});var c=e(4438);let o=(()=>{class p{transform(f,y=!1){if(!f||""===f)return f;let g,r,I,E=f.replace(/[^0-9]/g,""),v=!1;if("1"===E.charAt(0)&&11===E.length&&(v=!0,E=E.slice(1)),y)return E;switch(E.length){case 1:case 2:case 3:g=E;break;default:g=E.slice(0,3),r=E.slice(3)}return r?(r.length>3&&(r=r.slice(0,3)+"-"+r.slice(3,7)),I=("("+g+") "+r).trim().slice(0,14)):I="("+g,v?"1 "+I:I}static#t=this.\u0275fac=function(y){return new(y||p)};static#e=this.\u0275pipe=c.EJ8({name:"phoneNumber",type:p,pure:!0})}return p})()},2646:(O,m,e)=>{e.d(m,{t:()=>o});var c=e(4438);let o=(()=>{class p{transform(f){const y=f.toString();return y.length>4?"..."+y.slice(-4):y}static#t=this.\u0275fac=function(y){return new(y||p)};static#e=this.\u0275pipe=c.EJ8({name:"safeLoanId",type:p,pure:!0})}return p})()},3543:(O,m,e)=>{e.d(m,{A:()=>o});var c=e(9357);const o=[{id:10001234,type:c.B.LoanType.Secured,status:c.B.LoanStatus.Pending},{id:10002345,type:c.B.LoanType.Unsecured,status:c.B.LoanStatus.Pending},{id:10003456,type:c.B.LoanType.Secured,status:c.B.LoanStatus.Active,ballance:4278.34,lastPayment:253.28,lastPaymentDate:"2024-04-15"}]},950:(O,m,e)=>{e.d(m,{c:()=>p});const p=(0,e(7409).A)({appID:"angular-starter",production:!1,properties:{appName:"Angular Starter"},settings:{enableServiceWorker:!0,enableAppComms:!0,preloadRoutes:!1,obfuscate:!0},domains:{listenTo:["http://localhost:4200"]},endpoints:{envConfig:"http://localhost:4200/assets/mock-data/env-settings.json",apiUrl:null,authLogin:"http://localhost:4200/assets/mock-data/login.json",authTokenRefresh:null,versionPath:null,errorPath:null},state:{uiStoreBlacklist:[]},licenses:{vapid:{publicKey:"BIZ-IPJrxKxtdL9O9CnK42-XWcepJDPMQDfj8pb_vCfQxa7j1LoC4exdzZ5MhPWaF_5eWPglkj3V32xRswQEm6Q",privateKey:"jUOTBXqGGwElft-fTVBYb1BeLWrRhn2HgyJpXZBhgLo"},agGrid:"qwerty"}},{prod:!0})},1207:(O,m,e)=>{var c=e(345),o=e(4438),p=e(1626),u=e(728),f=e(1935),y=e(5779),E=e(9781),v=e(950),g=e(6609),r=e(9079),I=e(876);let T=(()=>{class a{constructor(B,A){this.auth=B,this.dom=A,this.dom.isBrowser&&(this.auth.logoutTimerExpired$.pipe((0,r.pQ)()).subscribe(),this.auth.refreshToken$.pipe((0,r.pQ)()).subscribe())}static#t=this.\u0275fac=function(A){return new(A||a)(o.rXU(g.uR),o.rXU(I.K5))};static#e=this.\u0275cmp=o.VBU({type:a,selectors:[["app-root"]],decls:1,vars:0,template:function(A,Q){1&A&&o.nrm(0,"router-outlet")},dependencies:[f.n3],styles:["[_nghost-%COMP%]{display:flex;min-height:100%;min-width:300px;width:100%;background-color:var(--body-background-color)}"]})}return a})();const M=[{path:"login",pathMatch:"full",loadChildren:()=>Promise.all([e.e(214),e.e(341),e.e(670),e.e(609),e.e(449),e.e(338)]).then(e.bind(e,2338)).then(a=>a.LoginModule),title:(0,g.Qe)("Please Log In")},{path:"loan",loadChildren:()=>Promise.all([e.e(214),e.e(670),e.e(609),e.e(449),e.e(694)]).then(e.bind(e,694)).then(a=>a.LoanModule)},{path:"",pathMatch:"full",loadChildren:()=>Promise.all([e.e(214),e.e(670),e.e(609),e.e(449),e.e(696)]).then(e.bind(e,4696)).then(a=>a.HomeModule)},{path:"**",loadChildren:()=>Promise.all([e.e(214),e.e(670),e.e(609),e.e(449),e.e(76)]).then(e.bind(e,6623)).then(a=>a.NoContentModule),title:(0,g.Qe)("Page Not Found")}];let U=(()=>{class a{static#t=this.\u0275fac=function(A){return new(A||a)};static#e=this.\u0275mod=o.$C({type:a});static#s=this.\u0275inj=o.G2t({imports:[f.iI.forRoot(M,{useHash:!1,preloadingStrategy:v.c.settings.preloadRoutes?f.Kp:f.D7,scrollPositionRestoration:"enabled",initialNavigation:"enabledBlocking"}),f.iI]})}return a})();const F=f.iI.forChild([{path:"~",loadChildren:()=>Promise.all([e.e(214),e.e(670)]).then(e.bind(e,9447)).then(a=>a.MasterPageModule)},{path:"~",loadChildren:()=>e.e(727).then(e.bind(e,1727)).then(a=>a.HelpPanelComponent)},{path:"~",loadChildren:()=>e.e(214).then(e.bind(e,2214)).then(a=>a.IconsComponent)},{path:"~",loadChildren:()=>e.e(341).then(e.bind(e,4341)).then(a=>a.FormsModule)},{path:"~",loadChildren:()=>e.e(341).then(e.bind(e,4341)).then(a=>a.ReactiveFormsModule)},{path:"~",loadChildren:()=>e.e(491).then(e.bind(e,491)).then(a=>a.CardModule)},{path:"~",loadChildren:()=>e.e(609).then(e.bind(e,2609)).then(a=>a.MessagesModule)},{path:"~",loadChildren:()=>Promise.all([e.e(341),e.e(298),e.e(314),e.e(542),e.e(740)]).then(e.bind(e,8740)).then(a=>a.TableModule)},{path:"~",loadChildren:()=>Promise.all([e.e(298),e.e(861)]).then(e.bind(e,9861)).then(a=>a.TreeModule)}]);v.c.production&&(0,o.SmG)();let x,J=(()=>{class a{constructor(B){this.injector=B,x=this.injector}static#t=this.\u0275fac=function(A){return new(A||a)(o.KVO(o.zZn))};static#e=this.\u0275mod=o.$C({type:a,bootstrap:[T]});static#s=this.\u0275inj=o.G2t({providers:[(0,c.$x)(),y.td,E.o3,{provide:f.Sd,useClass:g.Bh},{provide:o.zcH,useClass:g.qk},g.zQ,{provide:p.a7,useClass:g.zQ,multi:!0}],imports:[c.Bb.withServerTransition({appId:v.c.appID}),p.q1,u.wb,F,U]})}return a})();v.c.production&&(0,o.SmG)(),c.sG().bootstrapModule(J).catch(a=>console.log(a))}},O=>{O.O(0,[502],()=>O(O.s=1207)),O.O()}]);